# Traudit Configuration Example

database:
  type: clickhouse
  dsn: "http://user:password@ip:port/traudit"
  batch_size: 50
  batch_timeout_secs: 5

services:
  # receives traffic from frp with v2 proxy protocol header, audits it,
  # strips the header, and forwards pure tcp to local sshd.
  - name: "ssh"
    type: "tcp"
    binds:
      # Entry 1: Public traffic from FRP
      - addr: "unix://test.sock"
        proxy: "v2"

      # Entry 2: LAN direct traffic (no Proxy Protocol)
      - addr: "0.0.0.0:2222"

    forward_to: "127.0.0.1:22"

  - name: "https-web"
    type: "tcp"
    binds:
      - addr: "0.0.0.0:443"
        tls:
          cert: "/etc/ssl/certs/site.pem"
          key: "/etc/ssl/private/site.key"
      
      - addr: "0.0.0.0:4433"
        tls:
          cert: "/etc/ssl/certs/site.pem"
          key: "/etc/ssl/private/site.key"
        proxy: "v2"

    forward_to: "127.0.0.1:8080"